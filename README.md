![Application](https://img.shields.io/badge/Application-NDT-green)
![Python](https://img.shields.io/badge/Python-3.10-green)
![PySide6](https://img.shields.io/badge/GUI-PySide6-green)
![Windows](https://custom-icon-badges.demolab.com/badge/Windows-0078D6?logo=windows11&logoColor=white)
![Status](https://img.shields.io/badge/Status-Active%20development-orange)

# TPU-TNDT-DualCam-App
Десктопное приложение на Python/PySide6 для управления тепловым дефектоскопом с двумя камерами (ИК + RGB) и нагревательными элементами. Работает на Windows-планшетах и предназначено для неразрушающего контроля.

## Цели и задачи проекта
**Научная цель:** разработка программного обеспечения для автоматизации процесса активного теплового неразрушающего контроля (ТНК) с использованием синхронной записи данных с инфракрасной камеры и камеры видимого спектра.

### Технические задачи:
 * Создание GUI для работы в промышленных условиях на сенсорном планшете.
 * Обеспечение синхронного управления камерами (Optris PI 640, FLIR Blackfly S) и контроллером нагревателя.
 * Построение гибкой системы, пригодной для продолжения разработки и модификации силами небольшой команды разработчиков.

## Основные возможности

### Реализовано
- **Адаптивный интерфейс**
  - [x] Сенсорное управление на планшете с ОС Windows 10/11
  - [x] Автоматическое открытие экранной клавиатуры Windows
  - [x] Стартовая форма авторизации оператора дефектоскопа
  - [x] Валидация путей сохранения и пользовательских данных
  - [x] Окно настроек оборудования и UI

- **Работа с камерами**
  - [x] Поддержка тепловизоров Optris через `libirimager.dll`
  - [x] Поддержка камер FLIR Blackfly S через `PySpin`
  - [x] Поддержка USB-камер через `OpenCV`
  - [x] Одновременный вывод ИК и RGB изображений
  - [x] Запись видео с обеих камер
  - [x] Автоматическое переподключение при обрыве связи

- **Процесс контроля**
  - [x] Автоматизированный цикл: нагрев → охлаждение
  - [x] Progress-bar с анимацией для визуализации процесса
  - [x] Система зон контроля с координатной сеткой
  - [x] Диалоговые окна для управления процессом (`Trajectory`, `Retest`, `Finish`)

- **Системные функции**
  - [x] Настройки с сохранением в `JSON`
  - [x] Логирование для отладки

### В разработке
- **Расширенные функции тепловизора** (всё реализовано в optris_test.py, но ещё не интегирировано)
  - [ ] Температурные измерения в реальном времени (точка, средняя по кадру)
  - [ ] Выбор режима калибровки (авто/ручной)
  - [ ] 8 цветовых палитр для визуализации
  - [ ] Множественные форматы сохранения (PNG, CSV, NumPy, avi, ravi)
  - [ ] Сохранение снимков с метаданными (температуры чипа, флага, корпуса и др.)

- **Анализ данных**
  - [ ] Интеграция алгоритмов постобработки:
    - FFT (Быстрое преобразование Фурье)
    - PCA (Анализ главных компонент)
    - Background Subtraction (Вычитание фона)
    - AVG (Усреднение)
    - и других
  - [ ] Наложение изображений с регулируемой прозрачностью

### В планах
- **Визуализация и анализ**
  - [ ] Окно предпросмотра (`Preview`) с картой зон и графиками
  - [ ] 2D-визуализация тепловых данных
  - [ ] 3D-визуализация тепловых данных
  - [ ] Склейка обработанных термограмм зон
  - [ ] ML-алгоритмы обнаружения дефектов

- **Системные улучшения**
  - [ ] Мультиязычный интерфейс
  - [ ] Тёмная тема оформления UI

## Целевое аппаратное обеспечение
Данное ПО изначально предназначалось для запуска на следующем оборудовании:

#### Сенсорный планшет Cyberbook T116K
   - Windows 10 IoT
   - 10,1" 1920x1200
   - Intel m3-6Y30
   - 4 GB RAM
   - 128 GB ROM
   - Wi-Fi, BT, LTE, GPS
   
#### Промышленная камера видимого спектра Teledyne FLIR IIS Blackfly S GigE (BFS-PGE-27S5C-C)
   - Сенсор: Sony IMX429, CMOS, 2/3"
   - Размер пикселя: 4,5 мкм x 4,5 мкм
   - Разрешение: 1936 × 1464 (2,8 МП)
   - Глубина цвета: 12 бит
   - Макс. частота кадров: 43 FPS
   - Интерфейс: Gigabit Ethernet (GigE) с поддержкой PoE
   - Питание: Power over Ethernet (PoE) или внешнее 8–24 В через GPIO

#### Промышленный тепловизор Optris PI 640
   - Датчик: UFPA
   - Размер пикселя: 17 мкм x 17 мкм
   - Разрешение: 640 × 480 (0,3 МП)
   - Диапазон температур: –20 °C до 1500 °C
   - Погрешность: ±2 °C или ±2%
   - NETD: 75 мК
   - Макс. частота кадров: 32 FPS
   - Интерфейс: USB 2.0

#### Контроллер нагревателя
Микроконтроллер, управляющий нагревательными элементами с помощью твердотельных реле. Подключен по COM-порту с использованием модуля [serial_communicator](https://github.com/RadioPizza/serial_communicator).

## Демонстрация работы

_В этом разделе будут размещены гифки и скриншоты интерфейса._
<!-- TODO: Добавить скриншоты интерфейса, процесса записи, настроек и т.п. -->

## Структура проекта

_Здесь будет описана ключевая структура папок и файлов._

## Руководство разработчика

### Быстрый старт

**Предварительные требования**
   - Windows 10/11
   - Python 3.10

**1. Установите системные зависимости:**
   - [Optris PI Connect](https://www.optris.com/optris-pi-connect)
   - [FLIR Spinnaker SDK](https://www.flir.com/products/spinnaker-sdk/)

**2. Склонируйте репозиторий**
   ```bash
   git clone https://github.com/RadioPizza/TPU-TNDT-DualCam-App.git
   ```

**3. Настройте виртуальное окружение с интерпретатором  Python 3.10**
   ```bash
   cd TPU-TNDT-DualCam-App
   python -m venv venv
   venv\Scripts\activate  # Windows
   ```

**4. Установите зависимости**
   ```bash
   pip install -r requirements.txt
   ```   

**5. Запускайте**
   ```bash
   python main.py
   ``` 

### Conventional Commits
Мы используем [Conventional Commits](https://www.conventionalcommits.org/):
- `feat:` - новая функциональность
- `fix:` - исправление ошибок  
- `docs:` - изменения в документации
- `refactor:` - рефакторинг кода
- `chore:` - вспомогательные задачи

### Kanban board
Все текущие задачи и бэклог отслеживаются в [GitHub Project Board](https://github.com/users/RadioPizza/projects/4)

### Сборка и деплой
_Здесь будет описана процедура сборки исполняемого файла с помощью PyInstaller и его развертывания на целевом планшете._
<!-- TODO: Добавить инструкцию по копированию на планшет -->
